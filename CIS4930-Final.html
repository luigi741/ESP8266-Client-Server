<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.3/css/bulma.min.css'>

<nav class='navbar' style='background-color: #00FFFF'>
    <div class='navbar-brand' style='color: blue'>
        <a style='font-size: 24px' class='navbar-item'>The Birds: CIS 4930 - Embedded Systems</a>
    </div>

</nav>
<br>
<div class='container is-fluid'>
    <div class='tile is-ancestor'>
        <div class='tile is-vertical is-8'>
            <div class='tile'>
                <div class='tile is-parent is-vertical'>
                    <article class='tile is-child notification is-primary' style='background-color: #A232FE'>
                        <p class='title'>LED Controller</p>
                        <p class='subtitle'>Turn on some LEDs!</p>
                        <a class='button is-success is-large' href='/button1' style='margin-right: 20px'>ON</a>
                        <a class='button is-danger is-large' href='/button2'>OFF</a>
                    </article>
                    <article class='tile is-child notification is-warning'>
                        <p class='title'>Timer</p>
                        <p class='subtitle'>This specifies a value to send to a timer.</p>
                        <div class='field'>
                            <label class='label'>Time Increments</label>
                            <p class='control'>
                                <span class='select'>
                                        <select id='timerSelect'>
                                            <option id='opt1' value='10'>10 Seconds</option>
                                            <option id='opt2' value='20'>20 Seconds</option>
                                            <option id='opt3' value='30'>30 Seconds</option>
                                        </select>
                                    </span>
                            </p>
                        </div>
                        <div>
                            <p>
                                <button id='timerSubmit' class='button is-primary'>Submit</button>
                            </p>
                        </div>
                    </article>
                </div>
                <div class='tile is-parent'>
                    <article class='tile is-child notification is-info' style='background-color: #6BB8FD'>
                        <p class='title'>RGB LEDs</p>
                        <p class='subtitle'>Change the colors</p>
                        <!-- <figure class='image is-4by3'>
                            <img src='http://bulma.io/images/placeholders/640x480.png'>
                        </figure> -->
                        <br>
                        <div>
                            <a href='/red' style='margin-left: 80px; background-color: red; color: white' class='button is-large' type='button' name='red'>RED</a>
                            <a href='/green' style='margin-left: 30px; background-color: green; color: white' class='button is-large' type='button' name='green'>GREEN</a>
                            <a href='/blue' style='margin-left: 30px; background-color: blue; color: white' class='button is-large' type='button' name='blue'>BLUE</a>
                        </div>
                        <br>
                        <div>
                            <a href='/purple' style='margin-left: 120px; background-color: purple; color: white' class='button is-large' type='button' name='purple'>PURPLE</a>
                            <a href='/teal' style='margin-left: 30px; background-color: aqua' class='button is-large' type='button' name='teal'>TEAL</a>
                        </div>
                    </article>
                </div>
            </div>
            <div class='tile is-parent'>
                <article class='tile is-child notification is-danger'>
                    <p class='title'>LCD Communications</p>
                    <p class='subtitle'>Send a message to the LCD!</p>
                    <div class='content'>
                        <form action='/textbox' method='get'>
                            Text: <input type='text' name='textbox' , id='myText'>
                            <input class='button is-success is-small' type='submit' , id='myButton' value='Submit' onclick='textBoxPrint()'>
                        </form>
                    </div>
                </article>
            </div>
        </div>
        <div class='tile is-parent'>
            <article class='tile is-child notification is-success'>
                <div class='content'>
                    <p class='title'>Motion Detection</p>
                    <p class='subtitle'>Enable IR sensor to detect movement</p>
                    <div class='content'>
                        <p id='cardTime'>Suh Dude</p>
                        <a class='button is-primary' onclick='startTime()'>TEST</a>
                    </div>
                </div>
            </article>
        </div>
    </div>
</div>

<footer class='footer'>
    <div class='container'>
        <div class='content has-text-centered'>
            <p>Built with HTML/JavaScript using Bulma CSS Framework</p>
        </div>
    </div>
</footer>

<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<script type='text/javascript'>
    function consoleLog() {
        console.log('Clicked on button!');
    }

    function textBoxPrint() {
        var textBox = document.getElementById('myText').value;
        console.log(textBox);
    }

    function addText() {
        var pTag = document.getElementById('cardTime');
        pTag.innerHTML = 'Changed the text!';
    }

    function startTime() {
        var today = new Date();
        var h = today.getHours();
        var meridiem;

        if (h >= 12) {
            meridiem = 'PM';
        }
        else if (h >= 0 && h < 12) {
            meridiem = 'AM';
        }

        if (h > 12) {
            h -= 12;
        }
        var m = today.getMinutes();
        var s = today.getSeconds();
        m = checkTime(m);
        s = checkTime(s);
        document.getElementById('cardTime').innerHTML = h + ":" + m + ":" + s + ' ' + meridiem;
        var t = setTimeout(startTime, 500);
    }
    function checkTime(i) {
        if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
        return i;
    }

    $(document).ready(function() {
        $('#myButton').click(function() {
            var textBox = document.getElementById('myText').value;
            console.log('Clicked My Button!');
            $.get('/textbox', {
                text: textBox
            });
        });

        $('#timerSubmit').click(function() {
            var RequestHTTP = new XMLHttpRequest();
            var timer = $('#timerSelect').val();
            if (timer == '10') {
                console.log('Timer = 10');
                RequestHTTP.open('GET', '/timer1', true);
                RequestHTTP.send();
            }
            else if (timer == '20') {
                RequestHTTP.open('GET', '/timer2', true);
                RequestHTTP.send();
            }
            else if (timer == '30') {
                RequestHTTP.open('GET', '/timer3', true);
                RequestHTTP.send();
            }
        });
    });
</script>
